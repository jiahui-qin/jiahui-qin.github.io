---
title: 对高可用的第一印象
date: 2021-09-02 23:04:33
tags:
categories:
- 方法论
---

研三准备面试的时候就关注过这些概念，无奈自己太菜，也没有怎么实践过，粗糙的看了几篇文章也就全都忘掉了。

今天在地铁上的时候，又看了几篇高可用相关的文章，感觉有一点点微小的意思，大致写一下自己的理解吧

## 什么是高可用？

一个系统在99.99...%的时间里都是可用的，那就是高可用，总而言之，就是要尽可能的减少系统停机的时间

## 那么会有哪些因素会影响系统的高可用？

1. 程序设计：程序写的太烂导致内存溢出、程序挂掉还有啥高可用可言··这个在商业软件上大概考虑的不是很多

2. 承载的容器挂掉：这个就不是我们自己能够控制的了，比如掉电、寿命、温度··各种因素都有可能导致一个物理机挂掉，那么这种情况怎么办？

## 如何提高系统的可用性？

思路很简单：如果放在一个机器上容易挂掉，那么就放在n台机器上：n越大，可用性就越高：总不可能这么多台机器一起挂掉吧。

那么放在n台机器上就有问题了：

各台机器之间的地位是平等的，还是master-slave的结构呢？现在来看大多使用的是主从架构。

接下来就大致看一下不同类型的应用程序如何实现高可用：

### RabbitMQ:镜像集群模式

所有的queue都可以存在于多个实例，一个实例挂了还可以请求其它的实例··

### Kafka：HA机制

每部分数据都会同步存储到多台设备上，然后读写都和一个leader打交道，只有所有的数据在所有的follower上都写入成功，才返回写成功，这样也才可以读到这个数据。一个follower的数据失效之后还可以在其他的follower上读。

### Redis：哨兵

哨兵是一个独立的进程，通过向redis服务器发送命令并等待响应从而实现监控。

当master发生故障的时候，多个哨兵进行投票，确认此master下线之后，就会进行故障切换：把每个哨兵所监控的slave服务器的master切换到新选举出来的master